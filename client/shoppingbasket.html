<!doctype html>

<html lang="nl">
    <head>
        <meta charset="utf-8">

        <title>Sogyo Adventure</title>
        <meta name="description" content="The ticket shop for Sogyo employees">

        <link rel="stylesheet" href="style/main.css">
    </head>

    <body>

        <header id="logo-header">
            <img src="img/logo_sogyo_rgb_199x200-1.jpg">
        </header>
        <header id="mainheader">
            Sogyo Adventure
        </header>
        <nav>
            <a id="home" href="index.html">
                Home
            </a>
            |
            <a id="map" href="map.html">
                Discover
            </a>
            |
            <a id="shoppingbasket" href="shoppingbasket.html">
                Shopping basket <div class="badge">0</div>
            </a>
            |
            <a id="myorders" href="orders.html">
                My orders
            </a>
            |
            <a id="admin" href="admin.html">
                Admin
            </a>
        </nav>

        <button id="finalizepaymentbutton" onclick="requestPlaceOrder()" class="orderbutton">
            <span class="front">
                Pay now
            </span>
        </button>
        <main>
        </main>

        <template id="ticket">
            <article>
                <div class="parkname"></div>
                <div class="numberofadults"></div>
                <div class="numberofkids"></div>
                <div class="price"></div>
                <button class="orderbutton cancel">
                    <span class="front cancel">
                        Cancel order
                    </span>
                </button>
            </article>
        </template>

    </body>
    <script type="module" src="src/shoppingbasket.js"></script>

    <script>
        async function requestPlaceOrder() {
            var main = document.querySelector("main");
            var orders = localStorage.getItem("shoppingBasketArray");
            // console.log(orders);

            const response = await fetch("api/placeorder",
                {
                    method: 'POST', // *GET, POST, PUT, DELETE, etc.
                    mode: 'cors', // no-cors, *cors, same-origin
                    cache: 'no-cache', // *default, no-cache, reload, force-cache, only-if-cached
                    credentials: 'same-origin', // include, *same-origin, omit
                    headers: {
                      'Content-Type': 'application/json'
                      // 'Content-Type': 'application/x-www-form-urlencoded',
                    },
                    redirect: 'follow', // manual, *follow, error
                    referrerPolicy: 'no-referrer', // no-referrer, *no-referrer-when-downgrade, origin, origin-when-cross-origin, same-origin, strict-origin, strict-origin-when-cross-origin, unsafe-url
                    body: orders // body data type must match "Content-Type" header
              }
            );
        }
    </script>

</html>
